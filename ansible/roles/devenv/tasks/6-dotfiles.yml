- name: Install zsh
  apt:
    name: zsh
    state: present
    update_cache: yes
    cache_valid_time: 3600

- name: Set custom_username to use zsh
  user:
    name: "{{ custom_username }}"
    shell: /bin/zsh

- name: Checkout personal dotfiles repo
  git:
    repo: https://github.com/danrabinowitz/dotfiles.git
    dest: "/home/{{ custom_username }}/.dotfiles.git"

- name: Create symbolic links for dotfiles
  file:
    src: ".dotfiles.git/dot.{{ item }}"
    dest: "/home/{{ custom_username }}/.{{ item }}"
    state: link
    force: yes
  with_items:
    - bash_profile
    - bashrc
    - dircolors
    - emacs
    - emacs.d
    - gitconfig
    - irbrc
    - profile
    - inputrc
    - tmux.conf
    - psqlrc
    - my.cnf
    - gitignore_global
